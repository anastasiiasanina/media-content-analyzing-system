# Реалізація інформаційного та програмного забезпечення

## SQL-скрипт для створення на початкового наповнення бази даних

```SQL
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (1, 'http://walmart.com', 1, 1, 1);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (2, 'http://zdnet.com', 2, 2, 2);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (3, 'http://census.gov', 3, 3, 3);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (4, 'http://studiopress.com', 4, 4, 4);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (5, 'https://posterous.com', 5, 5, 5);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (6, 'https://goo.ne.jp', 6, 6, 6);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (7, 'http://wikispaces.com', 7, 7, 7);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (8, 'https://harvard.edu', 8, 8, 8);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (9, 'http://t.co', 9, 9, 9);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (10, 'http://boston.com', 10, 10, 10);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (11, 'http://nsw.gov.au', 11, 11, 11);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (12, 'https://xinhuanet.com', 12, 12, 12);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (13, 'https://artisteer.com', 13, 13, 13);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (14, 'http://xing.com', 14, 14, 14);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (15, 'https://ow.ly', 15, 15, 15);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (16, 'https://simplemachines.org', 16, 16, 16);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (17, 'http://mediafire.com', 17, 17, 17);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (18, 'https://plala.or.jp', 18, 18, 18);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (19, 'http://dailymail.co.uk', 19, 19, 19);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (20, 'http://webeden.co.uk', 20, 20, 20);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (21, 'http://bing.com', 21, 21, 21);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (22, 'https://posterous.com', 22, 22, 22);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (23, 'http://1und1.de', 23, 23, 23);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (24, 'https://shinystat.com', 24, 24, 24);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (25, 'https://about.me', 25, 25, 25);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (26, 'https://upenn.edu', 26, 26, 26);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (27, 'https://cbc.ca', 27, 27, 27);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (28, 'https://github.io', 28, 28, 28);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (29, 'http://businessinsider.com', 29, 29, 29);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (30, 'http://miibeian.gov.cn', 30, 30, 30);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (31, 'http://go.com', 31, 31, 31);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (32, 'http://tumblr.com', 32, 32, 32);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (33, 'https://wordpress.com', 33, 33, 33);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (34, 'https://list-manage.com', 34, 34, 34);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (35, 'http://hp.com', 35, 35, 35);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (36, 'http://arstechnica.com', 36, 36, 36);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (37, 'https://pcworld.com', 37, 37, 37);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (38, 'https://goo.gl', 38, 38, 38);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (39, 'http://unesco.org', 39, 39, 39);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (40, 'https://twitter.com', 40, 40, 40);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (41, 'https://harvard.edu', 41, 41, 41);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (42, 'https://facebook.com', 42, 42, 42);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (43, 'https://google.co.jp', 43, 43, 43);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (44, 'http://bizjournals.com', 44, 44, 44);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (45, 'http://dot.gov', 45, 45, 45);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (46, 'https://histats.com', 46, 46, 46);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (47, 'https://wisc.edu', 47, 47, 47);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (48, 'http://technorati.com', 48, 48, 48);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (49, 'https://1und1.de', 49, 49, 49);
insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (50, 'http://feedburner.com', 50, 50, 50);
```
## RESTfull сервіс для управління даними

```JS
const express = require("express");
const mysql = require('mysql2');
const app = express();
const jsonParser = express.json();

const localDb = {
    host: "localhost",
    user: "root",
    password: "sqldataBase",
    database: "mcas"
};

const dataBase = mysql.createConnection(localDb);

//add beat to table
app.post('/api/beat/post/add', jsonParser, (request, response) => {
    const beat = [request.body.id, request.body.uri,
        request.body.Source_id, request.body.BeatType_id, request.body.DataStream_id
    ];
    const sql = 'insert into beat (id, uri, Source_id, BeatType_id, DataStream_id) values (?, ?, ?, ?, ?) ';

    dataBase.connect(e => {
        if (e) throw e;
        dataBase.query(sql, beat, (e, result, field) => {
            if (e) throw e;
            result ? response.send(result) : response.sendStatus(404);
        });
    });
});

//get beat by id
app.get('/api/beat/:id', (request, response) => {
    const sql = 'SELECT * ' + 'FROM beat ' + `WHERE id = ${request.params.id}`;

    dataBase.connect(e => {
        if (e) throw e;
        dataBase.query(sql, (e, result, field) => {
            if (e) throw e;
            result ? response.send(result) : response.sendStatus(404);
        });
    });
});

//get all beats
app.get('/api/beat/get/all', (request, response) => {
    const sql = `SELECT * FROM beat `;

    dataBase.connect(e => {
        if (e) throw e;
        dataBase.query(sql, (e, result, field) => {
            if (e) throw e;
            response.send(result);
        });
    });
})

//update beat
app.put('/api/beat/put/update', jsonParser, (request, response) => {
    const sql = 'UPDATE beat ' +
        'SET id = ?, uri = ?, Source_id = ?, BeatType_id = ?, DataStream_id = ?' +
        `WHERE id = ${request.body.id}`;

    const beat = [request.body.id, request.body.uri,
        request.body.Source_id, request.body.BeatType_id, request.body.DataStream_id
    ];

    dataBase.connect(e => {
        if (e) throw e;
        dataBase.query(sql, beat, (e, result, field) => {
            if (e) throw e;
            result ? response.send(result) : response.sendStatus(404);
        });
    });
});

//delete beat
app.delete('/api/beat/delete/:id', (request, response) => {
    const sql = 'DELETE ' + 'FROM beat ' + `WHERE id = ${request.params.id}`;

    dataBase.connect(e => {
        if (e) throw e;
        dataBase.query(sql, (e, result, field) => {
            if (e) throw e;
            result ? response.send(result) : response.sendStatus(404);
        });
    });

});

const PORT = 3000 || process.env.PORT;

try {
    app.listen(PORT, () => console.log(`Server is running at ${PORT}`));
} catch (error) {
    console.log(error);
}
```
### Опис кінцевих точок RESTfull сервісу доступу до даних
-'/api/beat/post/add' - Додати біт
-'/api/beat/:id' - Отримати біт за його id
-'/api/beat/get/all' - Отримати всі біти
-'/api/beat/put/update' - Оновити дані 
-'/api/beat/delete/:id' - Видалити біт за його id

[Тестування працездатності системи](https://anastasiiasanina.github.io/media-content-analyzing-system/test/)

